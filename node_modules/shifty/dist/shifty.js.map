{"version":3,"sources":["webpack://shifty/webpack/universalModuleDefinition","webpack://shifty/webpack/bootstrap","webpack://shifty/./src/tweenable.js","webpack://shifty/./src/easing-functions.js","webpack://shifty/(webpack)/buildin/global.js","webpack://shifty/./src/token.js","webpack://shifty/./src/interpolate.js","webpack://shifty/./src/scene.js","webpack://shifty/./src/bezier.js","webpack://shifty/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","now","previousTween","nextTween","global","scheduleFunction","requestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","mozCancelRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","noop","listHead","listTail","formulas","easingFunctions","tweenProps","forPosition","currentState","originalState","targetState","duration","timestamp","easing","easedPosition","easingObjectProp","start","normalizedPosition","hasOneEase","processTween","tween","currentTime","_timestamp","_currentState","delay","_delay","_duration","_targetState","endTime","timeToCompute","hasEnded","offset","hasFilters","_filters","length","_render","_data","stop","_applyFilter","_originalState","_easing","processTweens","nextTweenToProcess","Tweenable","currentTween","_next","getCurrentTime","Date","composeEasingObject","fromTweenParams","composedEasing","typeofEasing","prop","remove","_previous","defaultPromiseCtor","Promise","initialState","config","undefined","this","_config","_resolve","_reject","_start","_promiseCtor","setConfig","filterName","filter","_isPlaying","_pausedAtTime","_resume","promise","finish","render","step","data","attachment","_scheduleId","from","to","anyPropsAreStrings","currentProp","filters","doesApply","push","onFulfilled","onRejected","_promise","resolve","reject","then","state","millisecond","Math","max","gotoEnd","tweenable","setScheduleFunction","fn","scheduleUpdate","linear","pos","easeInQuad","pow","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo","g","Function","e","number","comma","R_NUMBER_COMPONENT","R_FORMAT_CHUNKS","R_UNFORMATTED_VALUES","R_RGB","source","RegExp","R_RGB_PREFIX","R_HEX","getFormatChunksFrom","rawValues","prefix","map","val","hexToDec","hex","parseInt","convertHexToRGB","hexString","replace","split","substr","join","filterStringChunks","pattern","unfilteredString","patternMatches","match","filteredString","forEach","sanitizeObjectForHexProps","stateObject","sanitizeRGBChunk","rgbChunk","numbers","floor","getValuesFrom","formattedString","extractPropertyChunks","chunkNames","extractedValues","chunkName","getValuesList","getFormattedValues","formatString","rawValue","toFixed","tweenCreated","_tokenData","chunks","signatures","propertyName","charAt","unshift","getFormatSignatures","beforeTween","easingObject","tokenData","easingNames","defaultEasing","expandEasingObject","formatSignatures","expandFormattedProperties","afterTween","collapseFormattedProperties","firstEasing","easingName","collapseEasingObject","mockTweenable","interpolate","position","current","set","interpolatedValues","Scene","tweenables","add","index","indexOf","splice","some","isPlaying","pause","resume","cubicBezierAtTime","p1x","p1y","p2x","p2y","x","epsilon","ax","bx","cx","ay","by","cy","sampleCurveX","sampleCurveDerivativeX","fabs","solveEpsilon","sampleCurveY","t0","t1","t2","x2","d2","solveCurveX","setBezierFunction","x1","y1","y2","cubicBezierTransition","getCubicBezierTransition","displayName","unsetBezierFunction","token"],"mappings":"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","file":"shifty.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"shifty\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"shifty\"] = factory();\n\telse\n\t\troot[\"shifty\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import * as easingFunctions from './easing-functions'\n\n// CONSTANTS\nconst DEFAULT_EASING = 'linear'\nconst DEFAULT_DURATION = 500\nconst UPDATE_TIME = 1000 / 60\nconst root = typeof window !== 'undefined' ? window : global\n\nconst AFTER_TWEEN = 'afterTween'\nconst AFTER_TWEEN_END = 'afterTweenEnd'\nconst BEFORE_TWEEN = 'beforeTween'\nconst TWEEN_CREATED = 'tweenCreated'\nconst TYPE_FUNCTION = 'function'\nconst TYPE_STRING = 'string'\n\n// requestAnimationFrame() shim by Paul Irish (modified for Shifty)\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\nlet scheduleFunction =\n  root.requestAnimationFrame ||\n  root.webkitRequestAnimationFrame ||\n  root.oRequestAnimationFrame ||\n  root.msRequestAnimationFrame ||\n  (root.mozCancelRequestAnimationFrame && root.mozRequestAnimationFrame) ||\n  setTimeout\n\nconst noop = () => {}\n\nlet listHead = null\nlet listTail = null\n\n// Strictly used for testing\nexport const resetList = () => (listHead = listTail = null)\nexport const getListHead = () => listHead\nexport const getListTail = () => listTail\n\nconst formulas = { ...easingFunctions }\n\n/**\n * Calculates the interpolated tween values of an Object for a given\n * timestamp.\n * @param {number} forPosition The position to compute the state for.\n * @param {Object} currentState Current state properties.\n * @param {Object} originalState: The original state properties the Object is\n * tweening from.\n * @param {Object} targetState: The destination state properties the Object\n * is tweening to.\n * @param {number} duration: The length of the tween in milliseconds.\n * @param {number} timestamp: The UNIX epoch time at which the tween began.\n * @param {Object<string|Function>} easing: This Object's keys must correspond\n * to the keys in targetState.\n * @returns {Object}\n * @private\n */\nexport const tweenProps = (\n  forPosition,\n  currentState,\n  originalState,\n  targetState,\n  duration,\n  timestamp,\n  easing\n) => {\n  let easedPosition\n  let easingObjectProp\n  let start\n\n  const normalizedPosition =\n    forPosition < timestamp ? 0 : (forPosition - timestamp) / duration\n\n  let easingFn = null\n  let hasOneEase = false\n\n  if (easing && easing.call) {\n    hasOneEase = true\n    easedPosition = easing(normalizedPosition)\n  }\n\n  for (const key in currentState) {\n    if (!hasOneEase) {\n      easingObjectProp = easing[key]\n      easingFn = easingObjectProp.call\n        ? easingObjectProp\n        : formulas[easingObjectProp]\n\n      easedPosition = easingFn(normalizedPosition)\n    }\n\n    start = originalState[key]\n\n    currentState[key] = start + (targetState[key] - start) * easedPosition\n  }\n\n  return currentState\n}\n\nconst processTween = (tween, currentTime) => {\n  let timestamp = tween._timestamp\n  const currentState = tween._currentState\n  const delay = tween._delay\n\n  if (currentTime < timestamp + delay) {\n    return\n  }\n\n  let duration = tween._duration\n  const targetState = tween._targetState\n\n  const endTime = timestamp + delay + duration\n  let timeToCompute = currentTime > endTime ? endTime : currentTime\n  const hasEnded = timeToCompute >= endTime\n  const offset = duration - (endTime - timeToCompute)\n  const hasFilters = tween._filters.length > 0\n\n  if (hasEnded) {\n    tween._render(targetState, tween._data, offset)\n    return tween.stop(true)\n  }\n\n  if (hasFilters) {\n    tween._applyFilter(BEFORE_TWEEN)\n  }\n\n  // If the animation has not yet reached the start point (e.g., there was\n  // delay that has not yet completed), just interpolate the starting\n  // position of the tween.\n  if (timeToCompute < timestamp + delay) {\n    timestamp = duration = timeToCompute = 1\n  } else {\n    timestamp += delay\n  }\n\n  tweenProps(\n    timeToCompute,\n    currentState,\n    tween._originalState,\n    targetState,\n    duration,\n    timestamp,\n    tween._easing\n  )\n\n  if (hasFilters) {\n    tween._applyFilter(AFTER_TWEEN)\n  }\n\n  tween._render(currentState, tween._data, offset)\n}\n\n/**\n * Process all tweens currently managed by Shifty for the current tick. This\n * does not perform any timing or update scheduling; it is the logic that is\n * run *by* the scheduling functionality. Specifically, it computes the state\n * and calls all of the relevant {@link shifty.tweenConfig} functions supplied\n * to each of the tweens for the current point in time (as determined by {@link\n * shifty.Tweenable.now}.\n *\n * This is a low-level API that won't be needed in the majority of situations.\n * It is primarily useful as a hook for higher-level animation systems that are\n * built on top of Shifty. If you need this function, it is likely you need to\n * pass something like `() => {}` to {@link\n * shifty.Tweenable.setScheduleFunction}, override {@link shifty.Tweenable.now}\n * and manage the scheduling logic yourself.\n *\n * @method shifty.processTweens\n * @see https://github.com/jeremyckahn/shifty/issues/109\n */\nexport const processTweens = () => {\n  let nextTweenToProcess\n\n  const currentTime = Tweenable.now()\n  let currentTween = listHead\n\n  while (currentTween) {\n    nextTweenToProcess = currentTween._next\n    processTween(currentTween, currentTime)\n    currentTween = nextTweenToProcess\n  }\n}\n\nconst getCurrentTime = Date.now || (() => +new Date())\nlet now\n\n/**\n * Handles the update logic for one tick of a tween.\n * @param {number} [currentTimeOverride] Needed for accurate timestamp in\n * shifty.Tweenable#seek.\n * @private\n */\nexport const scheduleUpdate = () => {\n  now = getCurrentTime()\n  scheduleFunction.call(root, scheduleUpdate, UPDATE_TIME)\n\n  processTweens()\n}\n\n/**\n * Creates a usable easing Object from a string, a function or another easing\n * Object.  If `easing` is an Object, then this function clones it and fills\n * in the missing properties with `\"linear\"`.\n *\n * If the tween has only one easing across all properties, that function is\n * returned directly.\n * @param {Object.<string|Function>} fromTweenParams\n * @param {Object|string|Function} [easing]\n * @param {Object} [composedEasing] Reused composedEasing object (used internally)\n * @return {Object.<string|Function>|Function}\n * @private\n */\nexport const composeEasingObject = (\n  fromTweenParams,\n  easing = DEFAULT_EASING,\n  composedEasing = {}\n) => {\n  let typeofEasing = typeof easing\n\n  if (formulas[easing]) {\n    return formulas[easing]\n  }\n\n  if (typeofEasing === TYPE_STRING || typeofEasing === TYPE_FUNCTION) {\n    for (const prop in fromTweenParams) {\n      composedEasing[prop] = easing\n    }\n  } else {\n    for (const prop in fromTweenParams) {\n      composedEasing[prop] = easing[prop] || DEFAULT_EASING\n    }\n  }\n\n  return composedEasing\n}\n\n// Private declarations used below\n\nconst remove = ((previousTween, nextTween) => tween => {\n  // Adapted from:\n  // https://github.com/trekhleb/javascript-algorithms/blob/7c9601df3e8ca4206d419ce50b88bd13ff39deb6/src/data-structures/doubly-linked-list/DoublyLinkedList.js#L73-L121\n  if (tween === listHead) {\n    listHead = tween._next\n\n    if (listHead) {\n      listHead._previous = null\n    } else {\n      listTail = null\n    }\n  } else if (tween === listTail) {\n    listTail = tween._previous\n\n    if (listTail) {\n      listTail._next = null\n    } else {\n      listHead = null\n    }\n  } else {\n    previousTween = tween._previous\n    nextTween = tween._next\n\n    previousTween._next = nextTween\n    nextTween._previous = previousTween\n  }\n\n  // Clean up any references in case the tween is restarted later.\n  tween._previous = tween._next = null\n})()\n\nconst defaultPromiseCtor = typeof Promise === 'function' ? Promise : null\n\nexport class Tweenable {\n  /**\n   * @method shifty.Tweenable.now\n   * @static\n   * @returns {number} The current timestamp.\n   */\n  static now = () => now\n\n  /**\n   * @param {Object} [initialState={}] The values that the initial tween should\n   * start at if a `from` value is not provided to {@link\n   * shifty.Tweenable#tween} or {@link shifty.Tweenable#setConfig}.\n   * @param {shifty.tweenConfig} [config] Configuration object to be passed to\n   * {@link shifty.Tweenable#setConfig}.\n   * @constructs shifty.Tweenable\n   */\n  constructor(initialState = {}, config = undefined) {\n    this._config = {}\n    this._data = {}\n    this._delay = 0\n    this._filters = []\n    this._next = null\n    this._previous = null\n    this._timestamp = null\n    this._resolve = null\n    this._reject = null\n    this._currentState = initialState || {}\n    this._originalState = {}\n    this._targetState = {}\n    this._start = noop\n    this._render = noop\n    this._promiseCtor = defaultPromiseCtor\n\n    // To prevent unnecessary calls to setConfig do not set default\n    // configuration here.  Only set default configuration immediately before\n    // tweening if none has been set.\n    if (config) {\n      this.setConfig(config)\n    }\n  }\n\n  /**\n   * Applies a filter to Tweenable instance.\n   * @param {string} filterName The name of the filter to apply.\n   * @private\n   */\n  _applyFilter(filterName) {\n    for (let i = this._filters.length; i > 0; i--) {\n      const filterType = this._filters[i - i]\n      const filter = filterType[filterName]\n\n      if (filter) {\n        filter(this)\n      }\n    }\n  }\n\n  /**\n   * Configure and start a tween. If this {@link shifty.Tweenable}'s instance\n   * is already running, then it will stop playing the old tween and\n   * immediately play the new one.\n   * @method shifty.Tweenable#tween\n   * @param {shifty.tweenConfig} [config] Gets passed to {@link\n   * shifty.Tweenable#setConfig}.\n   * @return {shifty.Tweenable}\n   */\n  tween(config = undefined) {\n    if (this._isPlaying) {\n      this.stop()\n    }\n\n    if (config || !this._config) {\n      this.setConfig(config)\n    }\n\n    this._pausedAtTime = null\n    this._timestamp = Tweenable.now()\n    this._start(this.get(), this._data)\n\n    if (this._delay) {\n      this._render(this._currentState, this._data, 0)\n    }\n\n    return this._resume(this._timestamp)\n  }\n\n  /**\n   * Configure a tween that will start at some point in the future. Aside from\n   * `delay`, `from`, and `to`, each configuration option will automatically\n   * default to the same option used in the preceding tween of this {@link\n   * shifty.Tweenable} instance.\n   * @method shifty.Tweenable#setConfig\n   * @param {shifty.tweenConfig} [config={}]\n   * @return {shifty.Tweenable}\n   */\n  setConfig(config = {}) {\n    const { _config } = this\n\n    for (const key in config) {\n      _config[key] = config[key]\n    }\n\n    // Configuration options to reuse from previous tweens\n    const {\n      promise = this._promiseCtor,\n      start = noop,\n      finish,\n      render = this._config.step || noop,\n\n      // Legacy option. Superseded by `render`.\n      step = noop,\n    } = _config\n\n    // Attach something to this Tweenable instance (e.g.: a DOM element, an\n    // object, a string, etc.);\n    this._data = _config.data || _config.attachment || this._data\n\n    // Init the internal state\n    this._isPlaying = false\n    this._pausedAtTime = null\n    this._scheduleId = null\n    this._delay = config.delay || 0\n    this._start = start\n    this._render = render || step\n    this._duration = _config.duration || DEFAULT_DURATION\n    this._promiseCtor = promise\n\n    if (finish) {\n      this._resolve = finish\n    }\n\n    const { from, to = {} } = config\n    const { _currentState, _originalState, _targetState } = this\n\n    for (const key in from) {\n      _currentState[key] = from[key]\n    }\n\n    let anyPropsAreStrings = false\n\n    for (const key in _currentState) {\n      const currentProp = _currentState[key]\n\n      if (!anyPropsAreStrings && typeof currentProp === TYPE_STRING) {\n        anyPropsAreStrings = true\n      }\n\n      _originalState[key] = currentProp\n\n      // Ensure that there is always something to tween to.\n      _targetState[key] = to.hasOwnProperty(key) ? to[key] : currentProp\n    }\n\n    this._easing = composeEasingObject(\n      this._currentState,\n      _config.easing,\n      this._easing\n    )\n\n    this._filters.length = 0\n\n    if (anyPropsAreStrings) {\n      for (const key in Tweenable.filters) {\n        if (Tweenable.filters[key].doesApply(this)) {\n          this._filters.push(Tweenable.filters[key])\n        }\n      }\n\n      this._applyFilter(TWEEN_CREATED)\n    }\n\n    return this\n  }\n\n  /**\n   * Overrides any `finish` function passed via a {@link shifty.tweenConfig}.\n   * @method shifty.Tweenable#then\n   * @param {function} onFulfilled Receives {@link shifty.promisedData} as the\n   * first parameter.\n   * @param {function} onRejected Receives {@link shifty.promisedData} as the\n   * first parameter.\n   * @return {external:Promise}\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\n   */\n  then(onFulfilled, onRejected) {\n    this._promise = new this._promiseCtor((resolve, reject) => {\n      this._resolve = resolve\n      this._reject = reject\n    })\n\n    return this._promise.then(onFulfilled, onRejected)\n  }\n\n  /**\n   * @method shifty.Tweenable#catch\n   * @param {function} onRejected Receives {@link shifty.promisedData} as the\n   * first parameter.\n   * @return {external:Promise}\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n   */\n  catch(onRejected) {\n    return this.then().catch(onRejected)\n  }\n\n  /**\n   * @method shifty.Tweenable#get\n   * @return {Object} The current state.\n   */\n  get() {\n    return { ...this._currentState }\n  }\n\n  /**\n   * Set the current state.\n   * @method shifty.Tweenable#set\n   * @param {Object} state The state to set.\n   */\n  set(state) {\n    this._currentState = state\n  }\n\n  /**\n   * Pause a tween. Paused tweens can be resumed from the point at which they\n   * were paused. If a tween is not running, this is a no-op.\n   * @method shifty.Tweenable#pause\n   * @return {shifty.Tweenable}\n   */\n  pause() {\n    if (!this._isPlaying) {\n      return\n    }\n\n    this._pausedAtTime = Tweenable.now()\n    this._isPlaying = false\n    remove(this)\n\n    return this\n  }\n\n  /**\n   * Resume a paused tween.\n   * @method shifty.Tweenable#resume\n   * @return {shifty.Tweenable}\n   */\n  resume() {\n    return this._resume()\n  }\n\n  _resume(currentTime = Tweenable.now()) {\n    if (this._timestamp === null) {\n      return this.tween()\n    }\n\n    if (this._isPlaying) {\n      return this._promise\n    }\n\n    if (this._pausedAtTime) {\n      this._timestamp += currentTime - this._pausedAtTime\n      this._pausedAtTime = null\n    }\n\n    this._isPlaying = true\n\n    if (listHead === null) {\n      listHead = this\n      listTail = this\n    } else {\n      this._previous = listTail\n      listTail._next = this\n\n      listTail = this\n    }\n\n    return this\n  }\n\n  /**\n   * Move the state of the animation to a specific point in the tween's\n   * timeline.  If the animation is not running, this will cause {@link\n   * shifty.renderFunction} handlers to be called.\n   * @method shifty.Tweenable#seek\n   * @param {millisecond} millisecond The millisecond of the animation to seek\n   * to.  This must not be less than `0`.\n   * @return {shifty.Tweenable}\n   */\n  seek(millisecond) {\n    millisecond = Math.max(millisecond, 0)\n    const currentTime = Tweenable.now()\n\n    if (this._timestamp + millisecond === 0) {\n      return this\n    }\n\n    this._timestamp = currentTime - millisecond\n\n    // Make sure that any render handlers are run.\n    processTween(this, currentTime)\n\n    return this\n  }\n\n  /**\n   * Stops a tween. If a tween is not running, this is a no-op. This method\n   * does not cancel the tween {@link external:Promise}. For that, use {@link\n   * shifty.Tweenable#cancel}.\n   * @param {boolean} [gotoEnd] If `false`, the tween just stops at its current\n   * state.  If `true`, the tweened object's values are instantly set to the\n   * target values.\n   * @method shifty.Tweenable#stop\n   * @return {shifty.Tweenable}\n   */\n  stop(gotoEnd = false) {\n    if (!this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = false\n\n    remove(this)\n\n    const hasFilters = this._filters.length > 0\n\n    if (gotoEnd) {\n      if (hasFilters) {\n        this._applyFilter(BEFORE_TWEEN)\n      }\n\n      tweenProps(\n        1,\n        this._currentState,\n        this._originalState,\n        this._targetState,\n        1,\n        0,\n        this._easing\n      )\n\n      if (hasFilters) {\n        this._applyFilter(AFTER_TWEEN)\n        this._applyFilter(AFTER_TWEEN_END)\n      }\n    }\n\n    if (this._resolve) {\n      this._resolve({\n        data: this._data,\n        state: this._currentState,\n        tweenable: this,\n      })\n    }\n\n    this._resolve = null\n    this._reject = null\n\n    const { _currentState, _originalState, _targetState } = this\n\n    for (const key in _currentState) {\n      _originalState[key] = _targetState[key] = _currentState[key]\n    }\n\n    return this\n  }\n\n  /**\n   * {@link shifty.Tweenable#stop}s a tween and also `reject`s its {@link\n   * external:Promise}. If a tween is not running, this is a no-op. Prevents\n   * calling any provided `finish` function.\n   * @param {boolean} [gotoEnd] Is propagated to {@link shifty.Tweenable#stop}.\n   * @method shifty.Tweenable#cancel\n   * @return {shifty.Tweenable}\n   * @see https://github.com/jeremyckahn/shifty/issues/122\n   */\n  cancel(gotoEnd = false) {\n    const { _currentState, _data, _isPlaying } = this\n\n    if (!_isPlaying) {\n      return this\n    }\n\n    if (this._reject) {\n      this._reject({\n        data: _data,\n        state: _currentState,\n        tweenable: this,\n      })\n    }\n\n    this._resolve = null\n    this._reject = null\n\n    return this.stop(gotoEnd)\n  }\n\n  /**\n   * Whether or not a tween is running.\n   * @method shifty.Tweenable#isPlaying\n   * @return {boolean}\n   */\n  isPlaying() {\n    return this._isPlaying\n  }\n\n  /**\n   * @method shifty.Tweenable#setScheduleFunction\n   * @param {shifty.scheduleFunction} scheduleFunction\n   * @deprecated Will be removed in favor of {@link shifty.Tweenable.setScheduleFunction} in 3.0.\n   */\n  setScheduleFunction(scheduleFunction) {\n    Tweenable.setScheduleFunction(scheduleFunction)\n  }\n\n  /**\n   * Get and optionally set the data that gets passed as `data` to {@link\n   * shifty.promisedData}, {@link shifty.startFunction} and {@link\n   * shifty.renderFunction}.\n   * @param {Object} [data]\n   * @method shifty.Tweenable#data\n   * @return {Object} The internally stored `data`.\n   */\n  data(data = null) {\n    if (data) {\n      this._data = { ...data }\n    }\n\n    return this._data\n  }\n\n  /**\n   * `delete` all \"own\" properties.  Call this when the {@link\n   * shifty.Tweenable} instance is no longer needed to free memory.\n   * @method shifty.Tweenable#dispose\n   */\n  dispose() {\n    for (const prop in this) {\n      delete this[prop]\n    }\n  }\n}\n\n// TODO: Make these proper static methods.\n\n/**\n * Set a custom schedule function.\n *\n * By default,\n * [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)\n * is used if available, otherwise\n * [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)\n * is used.\n * @method shifty.Tweenable.setScheduleFunction\n * @param {shifty.scheduleFunction} fn The function to be\n * used to schedule the next frame to be rendered.\n * @return {shifty.scheduleFunction} The function that was set.\n */\nTweenable.setScheduleFunction = fn => (scheduleFunction = fn)\n\nTweenable.formulas = formulas\n\n/**\n * The {@link shifty.filter}s available for use.  These filters are\n * automatically applied at tween-time by Shifty. You can define your own\n * {@link shifty.filter}s and attach them to this object.\n * @member shifty.Tweenable.filters\n * @type {Object.<shifty.filter>}\n */\nTweenable.filters = {}\n\n/**\n * @method shifty.tween\n * @param {shifty.tweenConfig} [config={}]\n * @description Standalone convenience method that functions identically to\n * {@link shifty.Tweenable#tween}.  You can use this to create tweens without\n * needing to set up a {@link shifty.Tweenable} instance.\n *\n * ```\n * import { tween } from 'shifty';\n *\n * tween({ from: { x: 0 }, to: { x: 10 } }).then(\n *   () => console.log('All done!')\n * );\n * ```\n *\n * @returns {shifty.Tweenable} A new {@link shifty.Tweenable} instance.\n */\nexport function tween(config = {}) {\n  const tweenable = new Tweenable()\n  tweenable.tween(config)\n\n  // This is strictly a legacy shim from when this function returned a Promise.\n  // REMOVE THIS LINE IN THE NEXT MAJOR VERSION\n  tweenable.tweenable = tweenable\n\n  return tweenable\n}\n\nscheduleUpdate()\n","/*!\n * All equations are adapted from Thomas Fuchs'\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).\n *\n * Based on Easing Equations (c) 2003 [Robert\n * Penner](http://www.robertpenner.com/), all rights reserved. This work is\n * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).\n */\n\n/*!\n *  TERMS OF USE - EASING EQUATIONS\n *  Open source under the BSD License.\n *  Easing Equations (c) 2003 Robert Penner, all rights reserved.\n */\n\n/**\n * @member shifty.Tweenable.formulas\n * @description A static Object of {@link shifty.easingFunction}s that can by\n * used by Shifty. The default values are defined in\n * [`easing-functions.js`](easing-functions.js.html), but you can add your own\n * {@link shifty.easingFunction}s by defining them as keys to this Object.\n *\n * Shifty ships with an implementation of [Robert Penner's easing\n * equations](http://robertpenner.com/easing/), as adapted from\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js)'s\n * implementation.\n * <p data-height=\"934\" data-theme-id=\"0\" data-slug-hash=\"wqObdO\"\n * data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-embed-version=\"2\"\n * data-pen-title=\"Shifty - Easing formula names\" class=\"codepen\">See the Pen <a\n * href=\"https://codepen.io/jeremyckahn/pen/wqObdO/\">Shifty - Easing formula\n * names</a> by Jeremy Kahn (<a\n * href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>) on <a\n * href=\"https://codepen.io\">CodePen</a>.</p>\n * <script async\n * src=\"https://production-assets.codepen.io/assets/embed/ei.js\"></script>\n * @type {Object.<shifty.easingFunction>}\n * @static\n */\n\nexport const linear = pos => pos\n\nexport const easeInQuad = pos => Math.pow(pos, 2)\n\nexport const easeOutQuad = pos => -(Math.pow(pos - 1, 2) - 1)\n\nexport const easeInOutQuad = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 2) : -0.5 * ((pos -= 2) * pos - 2)\n\nexport const easeInCubic = pos => Math.pow(pos, 3)\n\nexport const easeOutCubic = pos => Math.pow(pos - 1, 3) + 1\n\nexport const easeInOutCubic = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 3) : 0.5 * (Math.pow(pos - 2, 3) + 2)\n\nexport const easeInQuart = pos => Math.pow(pos, 4)\n\nexport const easeOutQuart = pos => -(Math.pow(pos - 1, 4) - 1)\n\nexport const easeInOutQuart = pos =>\n  (pos /= 0.5) < 1\n    ? 0.5 * Math.pow(pos, 4)\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2)\n\nexport const easeInQuint = pos => Math.pow(pos, 5)\n\nexport const easeOutQuint = pos => Math.pow(pos - 1, 5) + 1\n\nexport const easeInOutQuint = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 5) : 0.5 * (Math.pow(pos - 2, 5) + 2)\n\nexport const easeInSine = pos => -Math.cos(pos * (Math.PI / 2)) + 1\n\nexport const easeOutSine = pos => Math.sin(pos * (Math.PI / 2))\n\nexport const easeInOutSine = pos => -0.5 * (Math.cos(Math.PI * pos) - 1)\n\nexport const easeInExpo = pos => (pos === 0 ? 0 : Math.pow(2, 10 * (pos - 1)))\n\nexport const easeOutExpo = pos => (pos === 1 ? 1 : -Math.pow(2, -10 * pos) + 1)\n\nexport const easeInOutExpo = pos => {\n  if (pos === 0) {\n    return 0\n  }\n\n  if (pos === 1) {\n    return 1\n  }\n\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * Math.pow(2, 10 * (pos - 1))\n  }\n\n  return 0.5 * (-Math.pow(2, -10 * --pos) + 2)\n}\n\nexport const easeInCirc = pos => -(Math.sqrt(1 - pos * pos) - 1)\n\nexport const easeOutCirc = pos => Math.sqrt(1 - Math.pow(pos - 1, 2))\n\nexport const easeInOutCirc = pos =>\n  (pos /= 0.5) < 1\n    ? -0.5 * (Math.sqrt(1 - pos * pos) - 1)\n    : 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1)\n\nexport const easeOutBounce = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos\n  } else if (pos < 2 / 2.75) {\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75\n  } else if (pos < 2.5 / 2.75) {\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375\n  } else {\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375\n  }\n}\n\nexport const easeInBack = pos => {\n  const s = 1.70158\n  return pos * pos * ((s + 1) * pos - s)\n}\n\nexport const easeOutBack = pos => {\n  const s = 1.70158\n  return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1\n}\n\nexport const easeInOutBack = pos => {\n  let s = 1.70158\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s))\n  }\n  return 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2)\n}\n\nexport const elastic = pos =>\n  -1 * Math.pow(4, -8 * pos) * Math.sin(((pos * 6 - 1) * (2 * Math.PI)) / 2) + 1\n\nexport const swingFromTo = pos => {\n  let s = 1.70158\n  return (pos /= 0.5) < 1\n    ? 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s))\n    : 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2)\n}\n\nexport const swingFrom = pos => {\n  const s = 1.70158\n  return pos * pos * ((s + 1) * pos - s)\n}\n\nexport const swingTo = pos => {\n  const s = 1.70158\n  return (pos -= 1) * pos * ((s + 1) * pos + s) + 1\n}\n\nexport const bounce = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos\n  } else if (pos < 2 / 2.75) {\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75\n  } else if (pos < 2.5 / 2.75) {\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375\n  } else {\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375\n  }\n}\n\nexport const bouncePast = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos\n  } else if (pos < 2 / 2.75) {\n    return 2 - (7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75)\n  } else if (pos < 2.5 / 2.75) {\n    return 2 - (7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375)\n  } else {\n    return 2 - (7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375)\n  }\n}\n\nexport const easeFromTo = pos =>\n  (pos /= 0.5) < 1\n    ? 0.5 * Math.pow(pos, 4)\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2)\n\nexport const easeFrom = pos => Math.pow(pos, 4)\n\nexport const easeTo = pos => Math.pow(pos, 0.25)\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","const R_NUMBER_COMPONENT = /(\\d|-|\\.)/\nconst R_FORMAT_CHUNKS = /([^\\-0-9.]+)/g\nconst R_UNFORMATTED_VALUES = /[0-9.-]+/g\nconst R_RGB = (() => {\n  const number = R_UNFORMATTED_VALUES.source\n  const comma = /,\\s*/.source\n\n  return new RegExp(`rgb\\\\(${number}${comma}${number}${comma}${number}\\\\)`, 'g')\n})()\nconst R_RGB_PREFIX = /^.*\\(/\nconst R_HEX = /#([0-9]|[a-f]){3,6}/gi\nconst VALUE_PLACEHOLDER = 'VAL'\n\n// HELPERS\n\n/**\n * @param {Array.number} rawValues\n * @param {string} prefix\n *\n * @return {Array.<string>}\n * @private\n */\nconst getFormatChunksFrom = (rawValues, prefix) =>\n  rawValues.map((val, i) => `_${prefix}_${i}`)\n\n/**\n * @param {string} formattedString\n *\n * @return {string}\n * @private\n */\nconst getFormatStringFrom = formattedString => {\n  let chunks = formattedString.match(R_FORMAT_CHUNKS)\n\n  if (!chunks) {\n    // chunks will be null if there were no tokens to parse in\n    // formattedString (for example, if formattedString is '2').  Coerce\n    // chunks to be useful here.\n    chunks = ['', '']\n\n    // If there is only one chunk, assume that the string is a number\n    // followed by a token...\n    // NOTE: This may be an unwise assumption.\n  } else if (\n    chunks.length === 1 ||\n    // ...or if the string starts with a number component (\".\", \"-\", or a\n    // digit)...\n    formattedString.charAt(0).match(R_NUMBER_COMPONENT)\n  ) {\n    // ...prepend an empty string here to make sure that the formatted number\n    // is properly replaced by VALUE_PLACEHOLDER\n    chunks.unshift('')\n  }\n\n  return chunks.join(VALUE_PLACEHOLDER)\n}\n\n/**\n * Convert a base-16 number to base-10.\n *\n * @param {number|string} hex The value to convert.\n *\n * @returns {number} The base-10 equivalent of `hex`.\n * @private\n */\nfunction hexToDec(hex) {\n  return parseInt(hex, 16)\n}\n\n/**\n * Convert a hexadecimal string to an array with three items, one each for\n * the red, blue, and green decimal values.\n *\n * @param {string} hex A hexadecimal string.\n *\n * @returns {Array.<number>} The converted Array of RGB values if `hex` is a\n * valid string, or an Array of three 0's.\n * @private\n */\nconst hexToRGBArray = hex => {\n  hex = hex.replace(/#/, '')\n\n  // If the string is a shorthand three digit hex notation, normalize it to\n  // the standard six digit notation\n  if (hex.length === 3) {\n    hex = hex.split('')\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2]\n  }\n\n  return [\n    hexToDec(hex.substr(0, 2)),\n    hexToDec(hex.substr(2, 2)),\n    hexToDec(hex.substr(4, 2)),\n  ]\n}\n\n/**\n * @param {string} hexString\n *\n * @return {string}\n * @private\n */\nconst convertHexToRGB = hexString =>\n  `rgb(${hexToRGBArray(hexString).join(',')})`\n\n/**\n * TODO: Can this be rewritten to leverage String#replace more efficiently?\n * Runs a filter operation on all chunks of a string that match a RegExp.\n *\n * @param {RegExp} pattern\n * @param {string} unfilteredString\n * @param {function(string)} filter\n *\n * @return {string}\n * @private\n */\nconst filterStringChunks = (pattern, unfilteredString, filter) => {\n  const patternMatches = unfilteredString.match(pattern)\n  let filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER)\n\n  if (patternMatches) {\n    patternMatches.forEach(\n      match =>\n        (filteredString = filteredString.replace(\n          VALUE_PLACEHOLDER,\n          filter(match)\n        ))\n    )\n  }\n\n  return filteredString\n}\n\n/**\n * @param {string} str\n *\n * @return {string}\n * @private\n */\nconst sanitizeHexChunksToRGB = str =>\n  filterStringChunks(R_HEX, str, convertHexToRGB)\n\n/**\n * Convert all hex color values within a string to an rgb string.\n *\n * @param {Object} stateObject\n * @private\n */\nconst sanitizeObjectForHexProps = stateObject => {\n  for (const prop in stateObject) {\n    const currentProp = stateObject[prop]\n\n    if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {\n      stateObject[prop] = sanitizeHexChunksToRGB(currentProp)\n    }\n  }\n}\n\n/**\n * @param {string} rgbChunk\n *\n * @return {string}\n * @private\n */\nconst sanitizeRGBChunk = rgbChunk => {\n  const numbers = rgbChunk.match(R_UNFORMATTED_VALUES).map(Math.floor)\n  const prefix = rgbChunk.match(R_RGB_PREFIX)[0]\n\n  return `${prefix}${numbers.join(',')})`\n}\n\n/**\n * Check for floating point values within rgb strings and round them.\n *\n * @param {string} formattedString\n *\n * @return {string}\n * @private\n */\nconst sanitizeRGBChunks = formattedString =>\n  filterStringChunks(R_RGB, formattedString, sanitizeRGBChunk)\n\n/**\n * Note: It's the duty of the caller to convert the Array elements of the\n * return value into numbers.  This is a performance optimization.\n *\n * @param {string} formattedString\n *\n * @return {Array.<string>|null}\n * @private\n */\nconst getValuesFrom = formattedString =>\n  formattedString.match(R_UNFORMATTED_VALUES)\n\n/**\n * @param {Object} stateObject\n *\n * @return {Object} An Object of formatSignatures that correspond to\n * the string properties of stateObject.\n * @private\n */\nconst getFormatSignatures = stateObject => {\n  const signatures = {}\n\n  for (const propertyName in stateObject) {\n    const property = stateObject[propertyName]\n\n    if (typeof property === 'string') {\n      signatures[propertyName] = {\n        formatString: getFormatStringFrom(property),\n        chunkNames: getFormatChunksFrom(getValuesFrom(property), propertyName),\n      }\n    }\n  }\n\n  return signatures\n}\n\n/**\n * @param {Object} stateObject\n * @param {Object} formatSignatures\n * @private\n */\nconst expandFormattedProperties = (stateObject, formatSignatures) => {\n  for (const propertyName in formatSignatures) {\n    getValuesFrom(stateObject[propertyName]).forEach(\n      (number, i) =>\n        (stateObject[formatSignatures[propertyName].chunkNames[i]] = +number)\n    )\n\n    delete stateObject[propertyName]\n  }\n}\n\n/**\n * @param {Object} stateObject\n * @param {Array.<string>} chunkNames\n *\n * @return {Object} The extracted value chunks.\n * @private\n */\nconst extractPropertyChunks = (stateObject, chunkNames) => {\n  const extractedValues = {}\n\n  chunkNames.forEach(chunkName => {\n    extractedValues[chunkName] = stateObject[chunkName]\n    delete stateObject[chunkName]\n  })\n\n  return extractedValues\n}\n\n/**\n * @param {Object} stateObject\n * @param {Array.<string>} chunkNames\n *\n * @return {Array.<number>}\n * @private\n */\nconst getValuesList = (stateObject, chunkNames) =>\n  chunkNames.map(chunkName => stateObject[chunkName])\n\n/**\n * @param {string} formatString\n * @param {Array.<number>} rawValues\n *\n * @return {string}\n * @private\n */\nconst getFormattedValues = (formatString, rawValues) => {\n  rawValues.forEach(\n    rawValue =>\n      (formatString = formatString.replace(\n        VALUE_PLACEHOLDER,\n        +rawValue.toFixed(4)\n      ))\n  )\n\n  return formatString\n}\n\n/**\n * @param {Object} stateObject\n * @param {Object} formatSignatures\n * @private\n */\nconst collapseFormattedProperties = (stateObject, formatSignatures) => {\n  for (const prop in formatSignatures) {\n    const { chunkNames, formatString } = formatSignatures[prop]\n\n    const currentProp = getFormattedValues(\n      formatString,\n      getValuesList(extractPropertyChunks(stateObject, chunkNames), chunkNames)\n    )\n\n    stateObject[prop] = sanitizeRGBChunks(currentProp)\n  }\n}\n\n/**\n * @param {Object} easingObject\n * @param {Object} tokenData\n * @private\n */\nconst expandEasingObject = (easingObject, tokenData) => {\n  for (const prop in tokenData) {\n    const { chunkNames } = tokenData[prop]\n    const easing = easingObject[prop]\n\n    if (typeof easing === 'string') {\n      const easingNames = easing.split(' ')\n      const defaultEasing = easingNames[easingNames.length - 1]\n\n      chunkNames.forEach(\n        (chunkName, i) =>\n          (easingObject[chunkName] = easingNames[i] || defaultEasing)\n      )\n    } else {\n      // easing is a function\n      chunkNames.forEach(chunkName => (easingObject[chunkName] = easing))\n    }\n\n    delete easingObject[prop]\n  }\n}\n\n/**\n * @param {Object} easingObject\n * @param {Object} tokenData\n * @private\n */\nconst collapseEasingObject = (easingObject, tokenData) => {\n  for (const prop in tokenData) {\n    const { chunkNames } = tokenData[prop]\n    const firstEasing = easingObject[chunkNames[0]]\n\n    if (typeof firstEasing === 'string') {\n      easingObject[prop] = chunkNames\n        .map(chunkName => {\n          const easingName = easingObject[chunkName]\n          delete easingObject[chunkName]\n\n          return easingName\n        })\n        .join(' ')\n    } else {\n      // firstEasing is a function\n      easingObject[prop] = firstEasing\n    }\n  }\n}\n\nexport const doesApply = tweenable => {\n  for (const key in tweenable._currentState) {\n    if (typeof tweenable._currentState[key] === 'string') {\n      return true\n    }\n  }\n\n  return false\n}\n\nexport function tweenCreated(tweenable) {\n  const { _currentState, _originalState, _targetState } = tweenable\n\n  ;[_currentState, _originalState, _targetState].forEach(\n    sanitizeObjectForHexProps\n  )\n\n  tweenable._tokenData = getFormatSignatures(_currentState)\n}\n\nexport function beforeTween(tweenable) {\n  const {\n    _currentState,\n    _originalState,\n    _targetState,\n    _easing,\n    _tokenData,\n  } = tweenable\n\n  expandEasingObject(_easing, _tokenData)\n  ;[_currentState, _originalState, _targetState].forEach(state =>\n    expandFormattedProperties(state, _tokenData)\n  )\n}\n\nexport function afterTween(tweenable) {\n  const {\n    _currentState,\n    _originalState,\n    _targetState,\n    _easing,\n    _tokenData,\n  } = tweenable\n  ;[_currentState, _originalState, _targetState].forEach(state =>\n    collapseFormattedProperties(state, _tokenData)\n  )\n\n  collapseEasingObject(_easing, _tokenData)\n}\n","import { Tweenable, composeEasingObject, tweenProps } from './tweenable'\n\n// Fake a Tweenable and patch some internals.  This approach allows us to\n// skip uneccessary processing and object recreation, cutting down on garbage\n// collection pauses.\nconst mockTweenable = new Tweenable()\nconst { filters } = Tweenable\n\n/**\n * Compute the midpoint of two Objects.  This method effectively calculates a\n * specific frame of animation that {@link shifty.Tweenable#tween} does many times\n * over the course of a full tween.\n *\n * ```\n * import { interpolate } from 'shifty';\n *\n * const interpolatedValues = interpolate({\n *     width: '100px',\n *     opacity: 0,\n *     color: '#fff'\n *   }, {\n *     width: '200px',\n *     opacity: 1,\n *     color: '#000'\n *   },\n *   0.5\n * );\n *\n * console.log(interpolatedValues); // Logs: {opacity: 0.5, width: \"150px\", color: \"rgb(127,127,127)\"}\n * ```\n *\n * @method shifty.interpolate\n * @param {Object} from The starting values to tween from.\n * @param {Object} to The ending values to tween to.\n * @param {number} position The normalized position value (between `0.0` and\n * `1.0`) to interpolate the values between `from` and `to` for.  `from`\n * represents `0` and `to` represents `1`.\n * @param {Object.<string|shifty.easingFunction>|string|shifty.easingFunction}\n * easing The easing curve(s) to calculate the midpoint against.  You can\n * reference any easing function attached to {@link shifty.Tweenable.formulas},\n * or provide the {@link shifty.easingFunction}(s) directly.  If omitted, this\n * defaults to \"linear\".\n * @param {number} [delay=0] Optional delay to pad the beginning of the\n * interpolated tween with.  This increases the range of `position` from (`0`\n * through `1`) to (`0` through `1 + delay`).  So, a delay of `0.5` would\n * increase all valid values of `position` to numbers between `0` and `1.5`.\n * @return {Object}\n */\nexport const interpolate = (from, to, position, easing, delay = 0) => {\n  const current = { ...from }\n  const easingObject = composeEasingObject(from, easing)\n\n  mockTweenable._filters.length = 0\n\n  mockTweenable.set({})\n  mockTweenable._currentState = current\n  mockTweenable._originalState = from\n  mockTweenable._targetState = to\n  mockTweenable._easing = easingObject\n\n  for (const name in filters) {\n    if (filters[name].doesApply(mockTweenable)) {\n      mockTweenable._filters.push(filters[name])\n    }\n  }\n\n  // Any defined value transformation must be applied\n  mockTweenable._applyFilter('tweenCreated')\n  mockTweenable._applyFilter('beforeTween')\n\n  const interpolatedValues = tweenProps(\n    position,\n    current,\n    from,\n    to,\n    1,\n    delay,\n    easingObject\n  )\n\n  // Transform data in interpolatedValues back into its original format\n  mockTweenable._applyFilter('afterTween')\n\n  return interpolatedValues\n}\n","export class Scene {\n  #tweenables = []\n\n  /**\n   * The {@link shifty.Scene} class provides a way to control groups of {@link\n   * shifty.Tweenable}s. It is lightweight, minimalistic, and meant to provide\n   * performant {@link shifty.Tweenable} batch control that users of Shifty\n   * might otherwise have to implement themselves. It is **not** a robust\n   * timeline solution, and it does **not** provide utilities for sophisticated\n   * animation sequencing or orchestration. If that is what you need for your\n   * project, consider using a more robust tool such as\n   * [Rekapi](http://jeremyckahn.github.io/rekapi/doc/) (a timeline layer built\n   * on top of Shifty).\n   *\n   * Please be aware that {@link shifty.Scene} does **not** perform any\n   * automatic cleanup. If you want to remove a {@link shifty.Tweenable} from a\n   * {@link shifty.Scene}, you must do so explicitly with either {@link\n   * shifty.Scene#remove} or {@link shifty.Scene#empty}.\n   *\n   * <p class=\"codepen\" data-height=\"677\" data-theme-id=\"0\" data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-slug-hash=\"qvZKbe\" style=\"height: 677px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;\" data-pen-title=\"Shifty Scene Demo\">\n   * <span>See the Pen <a href=\"https://codepen.io/jeremyckahn/pen/qvZKbe/\">\n   * Shifty Scene Demo</a> by Jeremy Kahn (<a href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>)\n   * on <a href=\"https://codepen.io\">CodePen</a>.</span>\n   * </p>\n   * <script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n   * @param {...shifty.Tweenable} tweenables\n   * @see https://codepen.io/jeremyckahn/pen/qvZKbe\n   * @constructs shifty.Scene\n   */\n  constructor(...tweenables) {\n    tweenables.forEach(this.add.bind(this))\n  }\n\n  /**\n   * A copy of the internal {@link shifty.Tweenable}s array.\n   * @member shifty.Scene#tweenables\n   * @type {Array.<shifty.Tweenable>}\n   * @readonly\n   */\n  get tweenables() {\n    return [...this.#tweenables]\n  }\n\n  /**\n   * The {@link external:Promise}s for all {@link shifty.Tweenable}s in this\n   * {@link shifty.Scene} that have been configured with {@link\n   * shifty.Tweenable#setConfig}. Note that each call of {@link\n   * shifty.Scene#play} or {@link shifty.Scene#pause} creates new {@link\n   * external:Promise}s:\n   *\n   *     const scene = new Scene(new Tweenable());\n   *     scene.play();\n   *\n   *     Promise.all(scene.promises).then(() =>\n   *       // Plays the scene again upon completion, but a new promise is\n   *       // created so this line only runs once.\n   *       scene.play()\n   *     );\n   *\n   * @member shifty.Scene#promises\n   * @type {Array.<external:Promise>}\n   * @readonly\n   */\n  get promises() {\n    return this.#tweenables.map(tweenable => tweenable.then())\n  }\n\n  /**\n   * Add a {@link shifty.Tweenable} to be controlled by this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#add\n   * @param {shifty.Tweenable} tweenable\n   * @return {shifty.Tweenable} The {@link shifty.Tweenable} that was added.\n   */\n  add(tweenable) {\n    this.#tweenables.push(tweenable)\n\n    return tweenable\n  }\n\n  /**\n   * Remove a {@link shifty.Tweenable} that is controlled by this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#remove\n   * @param {shifty.Tweenable} tweenable\n   * @return {shifty.Tweenable} The {@link shifty.Tweenable} that was removed.\n   */\n  remove(tweenable) {\n    const index = this.#tweenables.indexOf(tweenable)\n\n    if (~index) {\n      this.#tweenables.splice(index, 1)\n    }\n\n    return tweenable\n  }\n\n  /**\n   * [Remove]{@link shifty.Scene#remove} all {@link shifty.Tweenable}s in this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#empty\n   * @return {Array.<shifty.Tweenable>} The {@link shifty.Tweenable}s that were\n   * removed.\n   */\n  empty() {\n    // Deliberate of the tweenables getter here to create a temporary array\n    return this.tweenables.map(this.remove.bind(this))\n  }\n\n  /**\n   * Is `true` if any {@link shifty.Tweenable} in this {@link shifty.Scene} is\n   * playing.\n   * @method shifty.Scene#isPlaying\n   * @return {boolean}\n   */\n  isPlaying() {\n    return this.#tweenables.some(tweenable => tweenable.isPlaying())\n  }\n\n  /**\n   * Play all {@link shifty.Tweenable}s from their beginning.\n   * @method shifty.Scene#play\n   * @return {shifty.Scene}\n   */\n  play() {\n    this.#tweenables.forEach(tweenable => tweenable.tween())\n\n    return this\n  }\n\n  /**\n   * {@link shifty.Tweenable#pause} all {@link shifty.Tweenable}s in this\n   * {@link shifty.Scene}.\n   * @method shifty.Scene#pause\n   * @return {shifty.Scene}\n   */\n  pause() {\n    this.#tweenables.forEach(tweenable => tweenable.pause())\n    return this\n  }\n\n  /**\n   * {@link shifty.Tweenable#resume} all paused {@link shifty.Tweenable}s.\n   * @method shifty.Scene#resume\n   * @return {shifty.Scene}\n   */\n  resume() {\n    this.#tweenables.forEach(tweenable => tweenable.resume())\n\n    return this\n  }\n\n  /**\n   * {@link shifty.Tweenable#stop} all {@link shifty.Tweenable}s in this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#stop\n   * @param {boolean} [gotoEnd]\n   * @return {shifty.Scene}\n   */\n  stop(gotoEnd) {\n    this.#tweenables.forEach(tweenable => tweenable.stop(gotoEnd))\n    return this\n  }\n}\n","import { Tweenable } from './tweenable'\n\n/**\n * The Bezier magic in this file is adapted/copied almost wholesale from\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),\n * which was adapted from Apple code (which probably came from\n * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).\n * Special thanks to Apple and Thomas Fuchs for much of this code.\n */\n\n/**\n *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n *  1. Redistributions of source code must retain the above copyright notice,\n *  this list of conditions and the following disclaimer.\n *\n *  2. Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation\n *  and/or other materials provided with the distribution.\n *\n *  3. Neither the name of the copyright holder(s) nor the names of any\n *  contributors may be used to endorse or promote products derived from\n *  this software without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n *  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n// port of webkit cubic bezier handling by http://www.netzgesta.de/dev/\n\n/**\n * @param {number} t\n * @param {number} p1x\n * @param {number} p1y\n * @param {number} p2x\n * @param {number} p2y\n * @param {number} duration\n * @returns {Function}\n * @private\n */\nfunction cubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n  let ax = 0,\n    bx = 0,\n    cx = 0,\n    ay = 0,\n    by = 0,\n    cy = 0\n\n  const sampleCurveX = t => ((ax * t + bx) * t + cx) * t\n\n  const sampleCurveY = t => ((ay * t + by) * t + cy) * t\n\n  const sampleCurveDerivativeX = t => (3 * ax * t + 2 * bx) * t + cx\n\n  const solveEpsilon = duration => 1 / (200 * duration)\n\n  const fabs = n => (n >= 0 ? n : 0 - n)\n\n  const solveCurveX = (x, epsilon) => {\n    let t0, t1, t2, x2, d2, i\n\n    for (t2 = x, i = 0; i < 8; i++) {\n      x2 = sampleCurveX(t2) - x\n\n      if (fabs(x2) < epsilon) {\n        return t2\n      }\n\n      d2 = sampleCurveDerivativeX(t2)\n\n      if (fabs(d2) < 1e-6) {\n        break\n      }\n\n      t2 = t2 - x2 / d2\n    }\n\n    t0 = 0\n    t1 = 1\n    t2 = x\n\n    if (t2 < t0) {\n      return t0\n    }\n\n    if (t2 > t1) {\n      return t1\n    }\n\n    while (t0 < t1) {\n      x2 = sampleCurveX(t2)\n\n      if (fabs(x2 - x) < epsilon) {\n        return t2\n      }\n\n      if (x > x2) {\n        t0 = t2\n      } else {\n        t1 = t2\n      }\n\n      t2 = (t1 - t0) * 0.5 + t0\n    }\n\n    return t2 // Failure.\n  }\n\n  const solve = (x, epsilon) => sampleCurveY(solveCurveX(x, epsilon))\n\n  cx = 3 * p1x\n  bx = 3 * (p2x - p1x) - cx\n  ax = 1 - cx - bx\n  cy = 3 * p1y\n  by = 3 * (p2y - p1y) - cy\n  ay = 1 - cy - by\n\n  return solve(t, solveEpsilon(duration))\n}\n// End ported code\n\n/**\n *  GetCubicBezierTransition(x1, y1, x2, y2) -> Function.\n *\n *  Generates a transition easing function that is compatible\n *  with WebKit's CSS transitions `-webkit-transition-timing-function`\n *  CSS property.\n *\n *  The W3C has more information about CSS3 transition timing functions:\n *  http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\n *\n *  @param {number} x1\n *  @param {number} y1\n *  @param {number} x2\n *  @param {number} y2\n *  @return {Function}\n *  @private\n */\nconst getCubicBezierTransition = (x1, y1, x2, y2) => pos =>\n  cubicBezierAtTime(pos, x1, y1, x2, y2, 1)\n\n/**\n * Create a Bezier easing function and attach it to {@link\n * shifty.Tweenable.formulas}.  This function gives you total control over the\n * easing curve.  Matthew Lein's [Ceaser](http://matthewlein.com/ceaser/) is a\n * useful tool for visualizing the curves you can make with this function.\n * @method shifty.setBezierFunction\n * @param {string} name The name of the easing curve.  Overwrites the old\n * easing function on {@link shifty.Tweenable.formulas} if it exists.\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @return {shifty.easingFunction} The {@link shifty.easingFunction} that was\n * attached to {@link shifty.Tweenable.formulas}.\n */\nexport const setBezierFunction = (name, x1, y1, x2, y2) => {\n  const cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2)\n\n  cubicBezierTransition.displayName = name\n  cubicBezierTransition.x1 = x1\n  cubicBezierTransition.y1 = y1\n  cubicBezierTransition.x2 = x2\n  cubicBezierTransition.y2 = y2\n\n  return (Tweenable.formulas[name] = cubicBezierTransition)\n}\n\n/**\n * `delete` an easing function from {@link shifty.Tweenable.formulas}.  Be\n * careful with this method, as it `delete`s whatever easing formula matches\n * `name` (which means you can delete standard Shifty easing functions).\n * @method shifty.unsetBezierFunction\n * @param {string} name The name of the easing function to delete.\n * @return {boolean} Whether or not the functions was `delete`d.\n */\nexport const unsetBezierFunction = name => delete Tweenable.formulas[name]\n","/**\n * @namespace shifty\n */\n\nimport { processTweens, Tweenable, tween } from './tweenable'\nimport * as token from './token'\n\nTweenable.filters.token = token\n\nexport { processTweens, Tweenable, tween }\nexport { interpolate } from './interpolate'\nexport { Scene } from './scene'\nexport { setBezierFunction, unsetBezierFunction } from './bezier'\n\n/**\n * @external Promise\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise}\n */\n\n/**\n * @external thenable\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then}\n */\n\n/**\n * @callback {Function} shifty.easingFunction\n * @param {number} position The normalized (0-1) position of the tween.\n * @return {number} The curve-adjusted value.\n */\n\n/**\n * @callback {Function} shifty.startFunction\n * @param {Object} state The current state of the tween.\n * @param {Object|undefined} [data] User-defined data provided via a {@link\n * shifty.tweenConfig}.\n */\n\n/**\n * @callback {Function} shifty.finishFunction\n * @param {shifty.promisedData} promisedData\n */\n\n/**\n * Gets called for every tick of the tween.  This function is not called on the\n * final tick of the animation.\n * @callback {Function} shifty.renderFunction\n * @param {Object} state The current state of the tween.\n * @param {Object|undefined} [data] User-defined data provided via a {@link\n * shifty.tweenConfig}.\n * @param {number} timeElapsed The time elapsed since the start of the tween.\n */\n\n/**\n * @callback shifty.scheduleFunction\n * @param {Function} callback\n * @param {number} timeout\n */\n\n/**\n * @typedef {Object} shifty.tweenConfig\n * @property {Object} [from] Starting position.  If omitted, {@link\n * shifty.Tweenable#get} is used.\n * @property {Object} [to] Ending position.  The keys of this Object should\n * match those of `to`.\n * @property {number} [duration] How many milliseconds to animate for.\n * @property {number} [delay] How many milliseconds to wait before starting the\n * tween.\n * @property {shifty.startFunction} [start] Executes when the tween begins.\n * @property {shifty.finishFunction} [finish] Executes when the tween\n * completes. This will get overridden by {@link shifty.Tweenable#then} if that\n * is called, and it will not fire if {@link shifty.Tweenable#cancel} is\n * called.\n * @property {shifty.renderFunction} [render] Executes on every tick. Shifty\n * assumes a [retained mode](https://en.wikipedia.org/wiki/Retained_mode)\n * rendering environment, which in practice means that `render` only gets\n * called when the tween state changes. Importantly, this means that `render`\n * is _not_ called when a tween is not animating (for instance, when it is\n * paused or waiting to start via the `delay` option). This works naturally\n * with DOM environments, but you may need to account for this design in more\n * custom environments such as `<canvas>`.\n *\n * Legacy property name: `step`.\n * @property\n * {Object.<string|shifty.easingFunction>|string|shifty.easingFunction}\n * [easing] Easing curve name(s) or {@link shifty.easingFunction}(s) to apply\n * to the properties of the tween.  If this is an Object, the keys should\n * correspond to `to`/`from`.  You can learn more about this in the {@tutorial\n * easing-function-in-depth} tutorial.\n * @property {Object} [data] Data that is passed to {@link\n * shifty.startFunction}, {@link shifty.renderFunction}, and {@link\n * shifty.promisedData}. Legacy property name: `attachment`.\n * @property {Function} [promise] Promise constructor for when you want\n * to use Promise library or polyfill Promises in unsupported environments.\n */\n\n/**\n * @typedef {Object} shifty.promisedData\n * @property {Object} state The current state of the tween.\n * @property {Object} data The `data` Object that the tween was configured with.\n * @property {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance to\n * which the tween belonged.\n */\n\n/**\n * Is called when a tween is created to determine if a filter is needed.\n * Filters are only added to a tween when it is created so that they are not\n * unnecessarily processed if they don't apply during an update tick.\n * @callback {Function} shifty.doesApplyFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n * @return {boolean}\n */\n\n/**\n * Is called when a tween is created.  This should perform any setup needed by\n * subsequent per-tick calls to {@link shifty.beforeTween} and {@link\n * shifty.afterTween}.\n * @callback {Function} shifty.tweenCreatedFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n */\n\n/**\n * Is called right before a tween is processed in a tick.\n * @callback {Function} shifty.beforeTweenFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n */\n\n/**\n * Is called right after a tween is processed in a tick.\n * @callback {Function} shifty.afterTweenFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n */\n\n/**\n * An Object that contains functions that are called at key points in a tween's\n * lifecycle.  Shifty can only process `Number`s internally, but filters can\n * expand support for any type of data.  This is the mechanism that powers\n * [string interpolation]{@tutorial string-interpolation}.\n * @typedef {Object} shifty.filter\n * @property {shifty.doesApplyFilter} doesApply Is called when a tween is\n * created.\n * @property {shifty.tweenCreatedFilter} tweenCreated Is called when a tween is\n * created.\n * @property {shifty.beforeTweenFilter} beforeTween Is called right before a\n * tween starts.\n * @property {shifty.afterTweenFilter} afterTween Is called right after a tween\n * ends.\n */\n"],"sourceRoot":""}